var app=function(){"use strict";function e(){}function n(e){return e()}function t(){return Object.create(null)}function c(e){e.forEach(n)}function i(e){return"function"==typeof e}function o(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}let r,s;function l(e,n){return r||(r=document.createElement("a")),r.href=n,e===r.href}function f(e,n){e.appendChild(n)}function a(e,n,t){e.insertBefore(n,t||null)}function u(e){e.parentNode.removeChild(e)}function d(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function m(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function $(){return p(" ")}function g(e,n,t,c){return e.addEventListener(n,t,c),()=>e.removeEventListener(n,t,c)}function h(e,n,t){null==t?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function v(e,n){n=""+n,e.wholeText!==n&&(e.data=n)}function y(e,n){e.value=null==n?"":n}function w(e,n,t){e.classList[t?"add":"remove"](n)}function x(e){s=e}function b(e){(function(){if(!s)throw new Error("Function called outside component initialization");return s})().$$.on_mount.push(e)}const k=[],_=[],C=[],j=[],A=Promise.resolve();let I=!1;function E(e){C.push(e)}const N=new Set;let R=0;function S(){const e=s;do{for(;R<k.length;){const e=k[R];R++,x(e),T(e.$$)}for(x(null),k.length=0,R=0;_.length;)_.pop()();for(let e=0;e<C.length;e+=1){const n=C[e];N.has(n)||(N.add(n),n())}C.length=0}while(k.length);for(;j.length;)j.pop()();I=!1,N.clear(),x(e)}function T(e){if(null!==e.fragment){e.update(),c(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(E)}}const L=new Set;let O;function B(){O={r:0,c:[],p:O}}function H(){O.r||c(O.c),O=O.p}function q(e,n){e&&e.i&&(L.delete(e),e.i(n))}function z(e,n,t,c){if(e&&e.o){if(L.has(e))return;L.add(e),O.c.push((()=>{L.delete(e),c&&(t&&e.d(1),c())})),e.o(n)}}function F(e){e&&e.c()}function M(e,t,o,r){const{fragment:s,on_mount:l,on_destroy:f,after_update:a}=e.$$;s&&s.m(t,o),r||E((()=>{const t=l.map(n).filter(i);f?f.push(...t):c(t),e.$$.on_mount=[]})),a.forEach(E)}function P(e,n){const t=e.$$;null!==t.fragment&&(c(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function D(e,n){-1===e.$$.dirty[0]&&(k.push(e),I||(I=!0,A.then(S)),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function G(n,i,o,r,l,f,a,d=[-1]){const m=s;x(n);const p=n.$$={fragment:null,ctx:null,props:f,update:e,not_equal:l,bound:t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(m?m.$$.context:[])),callbacks:t(),dirty:d,skip_bound:!1,root:i.target||m.$$.root};a&&a(p.root);let $=!1;if(p.ctx=o?o(n,i.props||{},((e,t,...c)=>{const i=c.length?c[0]:t;return p.ctx&&l(p.ctx[e],p.ctx[e]=i)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](i),$&&D(n,e)),t})):[],p.update(),$=!0,c(p.before_update),p.fragment=!!r&&r(p.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);p.fragment&&p.fragment.l(e),e.forEach(u)}else p.fragment&&p.fragment.c();i.intro&&q(n.$$.fragment),M(n,i.target,i.anchor,i.customElement),S()}x(m)}class J{$destroy(){P(this,1),this.$destroy=e}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(e){var n;this.$$set&&(n=e,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function K(n){let t,c,o,r;return{c(){t=m("li"),c=p(n[0]),h(t,"class","svelte-r6h0o9"),w(t,"active",n[1])},m(e,s){a(e,t,s),f(t,c),o||(r=g(t,"click",(function(){i(n[2])&&n[2].apply(this,arguments)})),o=!0)},p(e,[i]){n=e,1&i&&v(c,n[0]),2&i&&w(t,"active",n[1])},i:e,o:e,d(e){e&&u(t),o=!1,r()}}}function Q(e,n,t){let{name:c}=n,{active:i=!1}=n,{onClick:o}=n;return e.$$set=e=>{"name"in e&&t(0,c=e.name),"active"in e&&t(1,i=e.active),"onClick"in e&&t(2,o=e.onClick)},[c,i,o]}class U extends J{constructor(e){super(),G(this,e,Q,K,o,{name:0,active:1,onClick:2})}}function V(e,n,t){const c=e.slice();return c[6]=n[t],c[8]=t,c}function W(e){let n,t;function c(){return e[5](e[8])}return n=new U({props:{name:e[6].name,onClick:c,active:e[1]===e[8]}}),{c(){F(n.$$.fragment)},m(e,c){M(n,e,c),t=!0},p(t,i){e=t;const o={};1&i&&(o.name=e[6].name),4&i&&(o.onClick=c),2&i&&(o.active=e[1]===e[8]),n.$set(o)},i(e){t||(q(n.$$.fragment,e),t=!0)},o(e){z(n.$$.fragment,e),t=!1},d(e){P(n,e)}}}function X(e){let n,t,c,i,o,r,s,l,y=e[3]?"Hide":"Show",x=e[0],b=[];for(let n=0;n<x.length;n+=1)b[n]=W(V(e,x,n));const k=e=>z(b[e],1,1,(()=>{b[e]=null}));return{c(){n=m("div"),t=m("button"),c=p(y),i=$(),o=m("ul");for(let e=0;e<b.length;e+=1)b[e].c();h(o,"class","svelte-vfc65w"),w(o,"open",e[3]),h(n,"class","panel svelte-vfc65w")},m(u,d){a(u,n,d),f(n,t),f(t,c),f(n,i),f(n,o);for(let e=0;e<b.length;e+=1)b[e].m(o,null);r=!0,s||(l=g(t,"click",e[4]),s=!0)},p(e,[n]){if((!r||8&n)&&y!==(y=e[3]?"Hide":"Show")&&v(c,y),7&n){let t;for(x=e[0],t=0;t<x.length;t+=1){const c=V(e,x,t);b[t]?(b[t].p(c,n),q(b[t],1)):(b[t]=W(c),b[t].c(),q(b[t],1),b[t].m(o,null))}for(B(),t=x.length;t<b.length;t+=1)k(t);H()}8&n&&w(o,"open",e[3])},i(e){if(!r){for(let e=0;e<x.length;e+=1)q(b[e]);r=!0}},o(e){b=b.filter(Boolean);for(let e=0;e<b.length;e+=1)z(b[e]);r=!1},d(e){e&&u(n),d(b,e),s=!1,l()}}}function Y(e,n,t){let{diffs:c=[]}=n,{diffIndex:i=0}=n,{onItemClick:o}=n,r=!0;return e.$$set=e=>{"diffs"in e&&t(0,c=e.diffs),"diffIndex"in e&&t(1,i=e.diffIndex),"onItemClick"in e&&t(2,o=e.onItemClick)},[c,i,o,r,()=>t(3,r=!r),e=>o(e)]}class Z extends J{constructor(e){super(),G(this,e,Y,X,o,{diffs:0,diffIndex:1,onItemClick:2})}}function ee(e,n,t){const c=e.slice();return c[10]=n[t],c}function ne(e){let n,t,c,i,o,r,s,d,p;return{c(){n=m("div"),t=m("img"),i=$(),o=m("img"),s=$(),d=m("img"),l(t.src,c=`/images/reference/${e[0].name}`)||h(t,"src",c),h(t,"alt","reference"),h(t,"class","svelte-1e8inyn"),l(o.src,r=`/images/diff/${e[0].name}`)||h(o,"src",r),h(o,"alt","diff"),h(o,"class","svelte-1e8inyn"),l(d.src,p=`/images/temp/${e[0].name}`)||h(d,"src",p),h(d,"alt","temp"),h(d,"class","svelte-1e8inyn"),h(n,"class","compare-diff svelte-1e8inyn")},m(e,c){a(e,n,c),f(n,t),f(n,i),f(n,o),f(n,s),f(n,d)},p(e,n){1&n&&!l(t.src,c=`/images/reference/${e[0].name}`)&&h(t,"src",c),1&n&&!l(o.src,r=`/images/diff/${e[0].name}`)&&h(o,"src",r),1&n&&!l(d.src,p=`/images/temp/${e[0].name}`)&&h(d,"src",p)},d(e){e&&u(n)}}}function te(e){let n,t,c,i,o,r;return{c(){n=m("div"),t=m("img"),i=$(),o=m("img"),l(t.src,c=`/images/reference/${e[0].name}`)||h(t,"src",c),h(t,"alt","reference"),h(t,"class","svelte-1e8inyn"),l(o.src,r=`/images/temp/${e[0].name}`)||h(o,"src",r),h(o,"alt","temp"),h(o,"class","svelte-1e8inyn"),h(n,"class","compare svelte-1e8inyn")},m(e,c){a(e,n,c),f(n,t),f(n,i),f(n,o)},p(e,n){1&n&&!l(t.src,c=`/images/reference/${e[0].name}`)&&h(t,"src",c),1&n&&!l(o.src,r=`/images/temp/${e[0].name}`)&&h(o,"src",r)},d(e){e&&u(n)}}}function ce(e){let n,t,c;return{c(){n=m("div"),t=m("img"),l(t.src,c=`/images/diff/${e[0].name}`)||h(t,"src",c),h(t,"alt","diff"),h(t,"class","svelte-1e8inyn"),h(n,"class","diff svelte-1e8inyn")},m(e,c){a(e,n,c),f(n,t)},p(e,n){1&n&&!l(t.src,c=`/images/diff/${e[0].name}`)&&h(t,"src",c)},d(e){e&&u(n)}}}function ie(e){let n,t,i,o,r,s,d,p,v,w,x,b;return{c(){n=m("div"),t=m("img"),o=$(),r=m("img"),p=$(),v=m("div"),w=m("input"),l(t.src,i=`/images/reference/${e[0].name}`)||h(t,"src",i),h(t,"alt","reference"),h(t,"class","svelte-1e8inyn"),l(r.src,s=`/images/temp/${e[0].name}`)||h(r,"src",s),h(r,"alt","temp"),h(r,"style",d=`opacity: ${e[4]}`),h(r,"class","svelte-1e8inyn"),h(n,"class","swipe svelte-1e8inyn"),h(w,"type","range"),h(w,"min","0"),h(w,"max","1"),h(w,"step","0.01"),h(w,"class","svelte-1e8inyn"),h(v,"class","slider svelte-1e8inyn")},m(c,i){a(c,n,i),f(n,t),f(n,o),f(n,r),a(c,p,i),a(c,v,i),f(v,w),y(w,e[4]),x||(b=[g(w,"change",e[7]),g(w,"input",e[7])],x=!0)},p(e,n){1&n&&!l(t.src,i=`/images/reference/${e[0].name}`)&&h(t,"src",i),1&n&&!l(r.src,s=`/images/temp/${e[0].name}`)&&h(r,"src",s),16&n&&d!==(d=`opacity: ${e[4]}`)&&h(r,"style",d),16&n&&y(w,e[4])},d(e){e&&u(n),e&&u(p),e&&u(v),x=!1,c(b)}}}function oe(e){let n,t,c,i,o,r=e[10]+"";function s(){return e[8](e[10])}return{c(){n=m("button"),t=p(r),c=$(),h(n,"class","svelte-1e8inyn"),w(n,"active",e[10]===e[3])},m(e,r){a(e,n,r),f(n,t),f(n,c),i||(o=g(n,"click",s),i=!0)},p(t,c){e=t,72&c&&w(n,"active",e[10]===e[3])},d(e){e&&u(n),i=!1,o()}}}function re(n){let t,o,r,s,l,y,w,x,b,k,_,C,j,A=n[5]?"Confirm ?":"Accept",I="compare-with-diff"===n[3]&&ne(n),E="compare"===n[3]&&te(n),N="diff"===n[3]&&ce(n),R="swipe"===n[3]&&ie(n),S=n[6],T=[];for(let e=0;e<S.length;e+=1)T[e]=oe(ee(n,S,e));return{c(){I&&I.c(),t=$(),E&&E.c(),o=$(),N&&N.c(),r=$(),R&&R.c(),s=$(),l=m("div");for(let e=0;e<T.length;e+=1)T[e].c();y=$(),w=m("div"),x=m("button"),x.textContent="Reject",b=$(),k=m("button"),_=p(A),h(l,"class","modes-container svelte-1e8inyn"),h(x,"class","reject svelte-1e8inyn"),h(k,"class","accept svelte-1e8inyn"),h(w,"class","validate-container svelte-1e8inyn")},m(e,c){I&&I.m(e,c),a(e,t,c),E&&E.m(e,c),a(e,o,c),N&&N.m(e,c),a(e,r,c),R&&R.m(e,c),a(e,s,c),a(e,l,c);for(let e=0;e<T.length;e+=1)T[e].m(l,null);a(e,y,c),a(e,w,c),f(w,x),f(w,b),f(w,k),f(k,_),C||(j=[g(x,"click",(function(){i(n[2])&&n[2].apply(this,arguments)})),g(k,"click",n[9])],C=!0)},p(e,[c]){if("compare-with-diff"===(n=e)[3]?I?I.p(n,c):(I=ne(n),I.c(),I.m(t.parentNode,t)):I&&(I.d(1),I=null),"compare"===n[3]?E?E.p(n,c):(E=te(n),E.c(),E.m(o.parentNode,o)):E&&(E.d(1),E=null),"diff"===n[3]?N?N.p(n,c):(N=ce(n),N.c(),N.m(r.parentNode,r)):N&&(N.d(1),N=null),"swipe"===n[3]?R?R.p(n,c):(R=ie(n),R.c(),R.m(s.parentNode,s)):R&&(R.d(1),R=null),72&c){let e;for(S=n[6],e=0;e<S.length;e+=1){const t=ee(n,S,e);T[e]?T[e].p(t,c):(T[e]=oe(t),T[e].c(),T[e].m(l,null))}for(;e<T.length;e+=1)T[e].d(1);T.length=S.length}32&c&&A!==(A=n[5]?"Confirm ?":"Accept")&&v(_,A)},i:e,o:e,d(e){I&&I.d(e),e&&u(t),E&&E.d(e),e&&u(o),N&&N.d(e),e&&u(r),R&&R.d(e),e&&u(s),e&&u(l),d(T,e),e&&u(y),e&&u(w),C=!1,c(j)}}}function se(e,n,t){let{diff:c=null}=n,{onAccept:i=null}=n,{onReject:o=null}=n,r="swipe",s=.5,l=!1;return e.$$set=e=>{"diff"in e&&t(0,c=e.diff),"onAccept"in e&&t(1,i=e.onAccept),"onReject"in e&&t(2,o=e.onReject)},e.$$.update=()=>{1&e.$$.dirty&&t(5,l=c&&!1)},[c,i,o,r,s,l,["diff","compare","compare-with-diff","swipe"],function(){var e;e=this.value,s=""===e?null:+e,t(4,s)},e=>{t(3,r=e)},()=>{if(l)return i();t(5,l=!0)}]}class le extends J{constructor(e){super(),G(this,e,se,re,o,{diff:0,onAccept:1,onReject:2})}}function fe(e){let n,t;return n=new Z({props:{diffs:e[0],diffIndex:e[1],onItemClick:e[5]}}),{c(){F(n.$$.fragment)},m(e,c){M(n,e,c),t=!0},p(e,t){const c={};1&t&&(c.diffs=e[0]),2&t&&(c.diffIndex=e[1]),2&t&&(c.onItemClick=e[5]),n.$set(c)},i(e){t||(q(n.$$.fragment,e),t=!0)},o(e){z(n.$$.fragment,e),t=!1},d(e){P(n,e)}}}function ae(e){let n,t;return n=new le({props:{diff:e[2],onAccept:e[6],onReject:e[7]}}),{c(){F(n.$$.fragment)},m(e,c){M(n,e,c),t=!0},p(e,t){const c={};4&t&&(c.diff=e[2]),4&t&&(c.onAccept=e[6]),4&t&&(c.onReject=e[7]),n.$set(c)},i(e){t||(q(n.$$.fragment,e),t=!0)},o(e){z(n.$$.fragment,e),t=!1},d(e){P(n,e)}}}function ue(e){let n,t,c,i=e[0].length&&fe(e),o=e[2]&&ae(e);return{c(){i&&i.c(),n=$(),o&&o.c(),t=p("")},m(e,r){i&&i.m(e,r),a(e,n,r),o&&o.m(e,r),a(e,t,r),c=!0},p(e,[c]){e[0].length?i?(i.p(e,c),1&c&&q(i,1)):(i=fe(e),i.c(),q(i,1),i.m(n.parentNode,n)):i&&(B(),z(i,1,1,(()=>{i=null})),H()),e[2]?o?(o.p(e,c),4&c&&q(o,1)):(o=ae(e),o.c(),q(o,1),o.m(t.parentNode,t)):o&&(B(),z(o,1,1,(()=>{o=null})),H())},i(e){c||(q(i),q(o),c=!0)},o(e){z(i),z(o),c=!1},d(e){i&&i.d(e),e&&u(n),o&&o.d(e),e&&u(t)}}}function de(e,n,t){let c,i=[],o=0;function r(){window.fetch("/api/diffs").then((e=>e.json())).then((e=>{t(0,i=e),t(1,o=0),i.length||window.setTimeout((()=>{window.alert("No diffs left ! This tab will now close."),window.close()}),100)}))}function s(e){window.fetch(`/api/accept?name=${e}`).then((e=>e.json())).then((()=>{r()}))}function l(e){window.fetch(`/api/reject?name=${e}`).then((e=>e.json())).then((()=>{r()}))}b((()=>{r()}));return e.$$.update=()=>{3&e.$$.dirty&&t(2,c=i[o])},[i,o,c,s,l,e=>{t(1,o=e)},()=>{s(c.name)},()=>{l(c.name)}]}return new class extends J{constructor(e){super(),G(this,e,de,ue,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
